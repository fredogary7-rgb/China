<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retrait | Golden Yield</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{ box-sizing:border-box; font-family:'Poppins',sans-serif; }

body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
  min-height:100vh;
}

/* APP CONTAINER */
.app{
  max-width:480px;
  margin:auto;
  padding-bottom:100px;
}

/* HEADER IMAGE */
.header-img{
  position:relative;
  height:220px;
  border-radius:20px;
  overflow:hidden;
  margin-top:16px;
}

.header-img img{
  width:100%;
  height:100%;
  object-fit:cover;
  filter:brightness(0.6);
}

.header-content{
  position:absolute;
  bottom:12px;
  left:12px;
  right:12px;
  z-index:2;
  background:rgba(0,0,0,0.5);
  backdrop-filter:blur(10px);
  padding:14px;
  border-radius:16px;
}

.header-title{
  font-size:20px;
  font-weight:600;
  margin-bottom:6px;
  color:#f5c842;
}

.balance-box small{
  color:#fff;
  opacity:.8;
}

.balance-box h1{
  margin:4px 0 0;
  font-size:28px;
  color:#f5c842;
}

/* CARDS */
.card{
  background:rgba(0,0,0,0.5);
  margin:15px 16px 10px;
  padding:16px;
  border-radius:18px;
}

.card h3{
  margin-top:0;
  font-size:16px;
  color:#f5c842;
}

/* INPUTS */
input{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:14px;
  border:none;
  font-size:15px;
  background:rgba(255,255,255,0.1);
  color:#fff;
}

input::placeholder{
  color:rgba(255,255,255,0.7);
}

input:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(0,198,255,0.6);
}

/* PORTEFEUILLE */
.portefeuille{
  border:1px solid rgba(255,255,255,0.2);
  padding:14px;
  border-radius:16px;
  margin-top:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  transition:transform .2s ease;
}

.portefeuille:hover{
  transform:scale(1.02);
}

.portefeuille span{
  color:#f5c842;
}

/* FEES */
.fees{
  display:flex;
  justify-content:space-between;
  margin-top:12px;
  font-size:14px;
  opacity:.8;
}

/* BUTTON RETRAIT */
.btn{
  width:100%;
  padding:14px;
  margin:20px 16px;
  border:none;
  border-radius:26px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  background:linear-gradient(135deg,#00c6ff,#0072ff);
  color:#fff;
  transition:transform .2s ease, box-shadow .2s ease;
}

.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 25px rgba(0,114,255,0.5);
}

.btn.active{
  opacity:1;
}

/* RULES */
.rules{
  background:rgba(0,0,0,0.5);
  margin:15px 16px 20px;
  padding:16px;
  border-radius:18px;
  font-size:14px;
}

.rules h4{
  margin-top:0;
  color:#f5c842;
}

.rules p{
  color:#fff;
  opacity:.8;
  margin:6px 0;
}

/* PROMO IMAGES */
.promo-images{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin:20px 16px;
}

.promo-images img{
  width:100%;
  height:110px;
  object-fit:cover;
  border-radius:16px;
  box-shadow:0 12px 25px rgba(0,0,0,.3);
  transition:transform .3s ease;
}

.promo-images img:hover{
  transform:scale(1.03);
}

/* SUPPORT */
.support-btn{
  position:fixed;
  right:20px;
  bottom:20px;
  width:55px;
  height:55px;
  background:linear-gradient(135deg,#00c6ff,#0072ff);
  color:#fff;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  text-decoration:none;
  box-shadow:0 10px 25px rgba(0,114,255,.5);
  animation:pulse 2s infinite;
  z-index:999;
}

@keyframes pulse{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.1); }
  100%{ transform:scale(1); }
}

</style>
</head>

<body>

<div class="app">

  <!-- HEADER -->
  <div class="header-img">
    <img src="{{ url_for('static', filename='images/c5.jpg') }}" alt="Retrait">
    <div class="header-content">
      <div class="header-title">Retrait</div>
      <div class="balance-box">
        <small>Solde de retrait</small>
        <h1>{{ "{:,.0f}".format(solde_retraitable).replace(",", " ") }} XOF</h1>
      </div>
    </div>
  </div>

  <form method="POST">

    <!-- PORTEFEUILLE -->
    <div class="card">
      <h3>S√©lectionnez un portefeuille de retrait</h3>
      <div class="portefeuille" onclick="window.location.href='/ajouter_portefeuille'">
        <div>
          <strong>{{ user.wallet_operator }}</strong><br>
          <small>{{ user.wallet_number }}</small>
        </div>
        <span>‚Ä∫</span>
      </div>
    </div>

    <!-- MONTANT -->
    <div class="card">
      <h3>Montant du retrait</h3>
      <input type="number" name="montant" id="montant" placeholder="XOF  Minimum 1 500" required>

      <div class="fees">
        <span>Montant re√ßu :</span>
        <span id="netAmount">0 XOF</span>
      </div>
      <div class="fees">
        <span>Frais (15%) :</span>
        <span id="feesAmount">0 XOF</span>
      </div>
    </div>

    <button class="btn" id="withdrawBtn" type="submit">Retirer maintenant</button>
  </form>

  <!-- RULES -->
  <div class="rules">
    <h4>R√®gles de retrait</h4>
    <p>1. Le montant minimum de retrait est d√©fini par la plateforme.</p>
    <p>2. Une taxe de <strong>15%</strong> est automatiquement appliqu√©e.</p>
    <p>3. Assurez-vous que votre compte de retrait est correct.</p>
    <p>4. Les retraits sont trait√©s apr√®s v√©rification.</p>
    <p>5. Un retrait incorrect peut entra√Æner un rejet.</p>
  </div>

  <!-- PROMO IMAGES -->
  <div class="promo-images">
    <img src="/static/images/c1.jpg" alt="Conseil 1">
    <img src="/static/images/c2.jpg" alt="Conseil 2">
  </div>

</div>

<!-- SUPPORT -->
<a href="/support" target="_blank" class="support-btn" title="Service client">üí¨</a>

<script>
document.getElementById("montant").addEventListener("input", function () {
    let montant = parseFloat(this.value);
    let btn = document.getElementById("withdrawBtn");

    if (isNaN(montant) || montant <= 0) {
        document.getElementById("netAmount").innerText = "0 XOF";
        document.getElementById("feesAmount").innerText = "0 XOF";
        return;
    }

    let fees = montant * 0.15;
    let net = montant - fees;

    document.getElementById("netAmount").innerText = net.toLocaleString("fr-FR") + " XOF";
    document.getElementById("feesAmount").innerText = fees.toLocaleString("fr-FR") + " XOF";

    btn.classList.add("active");
});
</script>

</body>
</html>
